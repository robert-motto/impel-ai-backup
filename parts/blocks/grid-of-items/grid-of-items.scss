@use 'config' as *;

.l-section--grid-of-items {
	padding: var(--padding-vertical-4xl) 0;
	background-color: var(--background-bg-primary--c-brand-primary-forest);

	&--carousel {
		padding-top: var(--padding-vertical-lg);
		padding-right: 0;
		padding-bottom: var(--padding-vertical-4xl);
		padding-left: 0;
	}

	&.color-mode-variant-secondary {
		background-color: var(--bg-secondary);
	}
}

.grid-of-items {
	display: flex;
	flex-direction: column;
	gap: var(--spacing-1050);

	&__grid {
		display: grid;
		width: 100%;
		column-gap: rem(24px);
		row-gap: rem(40px);

		@include mobile {
			grid-template-columns: 1fr;
		}

		@include md {
			grid-template-columns: repeat(2, 1fr);
		}

		@include lg {
			&.grid-of-items__grid--cols-2 {
				grid-template-columns: repeat(2, 1fr);
			}

			&.grid-of-items__grid--cols-3 {
				grid-template-columns: repeat(3, 1fr);
			}
		}

		&--icons {
			column-gap: rem(8px);
			row-gap: rem(8px);

			.grid-of-items__item {
				justify-content: space-between;
				min-height: rem(442px);
				padding: rem(32px) rem(34px) rem(32px) rem(28px);
				border-radius: var(--border-radius-lg);
				background: var(--elevation-surface-sunken-primary-default);

				.color-mode-variant-secondary & {
					background: var(--elevation-surface-sunken-secondary-default);
				}
			}

			.grid-of-items__content {
				flex-grow: unset;
			}

			.grid-of-items__media-container {
				display: flex;
				align-items: center;
				justify-content: center;
				width: rem(80px);
				height: rem(80px);
				border-radius: var(--border-radius-s);
				background: var(--elevation-surface-sunken-secondary-default);

				.color-mode-variant-secondary & {
					background: var(--elevation-surface-sunken-primary-default);
				}

				&--no-icon {
					background: none;
				}
			}

			.grid-of-items__svg {
				width: auto;
				height: 27px;
				margin: 0 auto;
				object-fit: contain;
			}
		}

		&--images {
			.grid-of-items__media-container {
				aspect-ratio: 4 / 3;
			}

			.grid-of-items__img {
				width: 100%;
				height: 100%;
				object-fit: cover;
				border-radius: var(--radius-16);
			}
		}
	}

	&__item {
		display: flex;
		flex-direction: column;
		height: 100%;
		border: 1px solid var(--wf-neutral-neutral-80);
		border-radius: 8px;
		transition: transform 0.3s ease;
		overflow: hidden;

		&.grid-of-items__item--link:hover {
			transform: translateY(rem(-4px));

			.btn {
				.text {
					&::after {
						transform-origin: left;
						scale: 1 1;
					}
				}
			}
		}
	}

	&__media-container {
		width: 100%;
		margin-bottom: var(--spacing-600);
		background-color: var(--wf-neutral-neutral-95);
		overflow: hidden;
	}

	&__img,
	&__svg {
		width: 100%;
		height: 100%;
		object-fit: cover;
	}

	&__content {
		display: flex;
		flex-grow: 1;
		flex-direction: column;
	}

	&__item-heading {
		margin-bottom: var(--spacing-400);
		color: var(--txt-heading);
		font-size: var(--t--card-title-2);
		line-height: var(--t--line-height-600);
	}

	&__item-content {
		margin-bottom: var(--spacing-600);
		color: var(--txt-paragraph-primary);
		font-size: var(--t--paragraph-2);
		line-height: var(--t--line-height-400);
	}

	&__carousel-container {
		display: flex;
		flex-direction: column;
		gap: var(--spacing-800);
	}

	&__carousel {
		width: 100%;
		margin: rem(-8px);
		padding: rem(8px);
		overflow: hidden;

		.swiper-wrapper {
			display: flex;
			align-items: stretch;
		}

		.swiper-slide,
		&__slide {
			display: flex;
			flex-shrink: 0;
			flex-direction: column;
			width: auto;
			height: auto;
			min-height: rem(512px);

			> .grid-of-items__item {
				width: 100%;
				height: 100%;
				border: 2px solid var(--elevation-surface-sunken-secondary-default);
				border-radius: 24px;
				border-radius: var(--border-radius-xxl);
				background-color: var(--background-bg-primary--c-brand-primary-forest);

				.color-mode-variant-secondary & {
					border-color: var(--border-subtle);
					background-color: var(--bg-secondary);
				}

				.grid-of-items__item-link-wrapper {
					display: flex;
					flex-direction: column;
					height: 100%;
				}

				.grid-of-items__media-container {
					display: flex;
					align-items: center;
					justify-content: center;
					width: fit-content;
					height: 48px;
					margin: rem(10px);
					margin: rem(28px) 0 rem(18px) rem(26px);
					padding: 0 rem(16px);
					border: 1px solid var(--interface-divider-divider);
					border-radius: var(--border-radius-s);

					&--no-icon {
						border: none;
					}
				}

				.grid-of-items__svg {
					width: 134px;
					height: auto;
					max-height: 42px;
					margin: 0 auto;
					object-fit: contain;
				}

				.grid-of-items__content {
					padding: var(--spacing-600) 28px var(--spacing-600);
				}

				.grid-of-items__item-heading {
					letter-spacing: -0.005em;
					line-height: calc(36 / 25);
				}

				.grid-of-items__item-content {
					margin-bottom: rem(26px);
					padding-right: rem(20px);
					line-height: calc(24 / 14);
				}

				.grid-of-items__metric-box {
					display: flex;
					align-items: center;
					margin: auto 0 0;
					padding: rem(8px) rem(54px) rem(8px) rem(22px);
					border-radius: rem(8px);
					background-color: #EDECF4;
					gap: rem(16px);
				}

				.grid-of-items__metric-value {
					display: flex;
					align-items: baseline;
					color: var(--txt-heading);
					font-size: rem(28px);
					font-weight: 400;
					line-height: calc(48 / 28);
					gap: rem(4px);

					.grid-of-items__metric-icon {
						svg {
							width: rem(14px);
							height: rem(14px);
							stroke: var(--brand-secondary-default);
						}
					}
				}

				.grid-of-items__metric-description {
					color: var(--txt-heading);
					font-size: rem(12px);
					font-weight: 400;
					line-height: calc(15.6 / 12);
				}
			}
		}

		.slider__navigation {
			margin: rem(80px) rem(68px) 0 rem(114px);
		}
	}

	&__controls {
		display: flex;
		align-items: center;
		justify-content: space-between;
		width: 100%;
		padding: 0 var(--padding-horizontal-sm);

		@include mobile {
			flex-direction: column;
			gap: var(--spacing-600);
		}
	}

	&__nav-progress-wrapper {
		display: flex;
		flex-grow: 1;
		align-items: center;
		gap: rem(64px);

		@include mobile {
			justify-content: space-between;
			width: 100%;
			gap: var(--spacing-400);
		}
	}

	&__navigation {
		display: flex;
		align-items: center;
		gap: rem(4px);
		padding: rem(4px);
		border-radius: var(--border-radius-s);
		background-color: rgba(237, 236, 244, 0.4);
	}

	&__nav-button {
		display: inline-flex;
		align-items: center;
		justify-content: center;
		cursor: pointer;
		width: rem(44px);
		height: rem(28px);
		padding: 0 rem(12px);
		border: none;
		background-color: transparent;
		color: var(--txt-primary);
		transition: background-color 0.2s ease;

		&:hover {
			// Add hover style if needed
		}

		svg {
			width: rem(20px);
			height: rem(20px);
			stroke: var(--txt-primary);
		}

		&--prev {
			// styles for prev button
		}

		&--next {
			border-left: 1px solid rgba(18, 18, 18, 0.1);
		}

		&.swiper-button-disabled {
			cursor: not-allowed;
			opacity: 0.5;
		}
	}

	&__progressbar {
		flex-grow: 1;
		height: rem(4px);
		border-radius: var(--interface-border-subtle);
		background-color: rgba(237, 236, 244, 0.4);

		.swiper-pagination-progressbar-fill {
			background-color: var(--interface-border-active);
		}
	}

	&__more-link {
		@include mobile {
			width: 100%;

			.btn {
				justify-content: center;
				width: 100%;
			}
		}
	}
}
